---
title: AxonFramework简介
date: 2018-08-17 16:19:19
categories: AxonFramework
tags: [AxonFramework]
author: 勇赴
---

Axon是一个轻量级框架，可帮助开发人员在架构级别构建可伸缩和可伸缩的应用程序。 （注：基于DDD域驱动设计的CQRS框架）

<!-- more -->
## Axon Framework背景、发展简史

随着时间的发展，软件的需求也在不断增长。公司都希望自己的(web)应用程序和自身业务共同发展。这就意味着不仅仅是工程和代码变得更复杂，也意味着功能不断地新增、更改和移除。它令人沮丧的是,一个看似易于实现的功能，却要求开发团队改动整个应用程 \序。此外，如今的web程序的目标是针对潜在的数十亿用户，这便使可伸缩性成了必要的条件。

尽管许多应用程序和框架都处理可扩展性问题，例如GigaSpaces（类似于Microsoft Azure）和Terracotta（分布式缓存线性扩展平台），但它们都存在根本性缺陷。他们试图通过要求开发人员在开发应用程序时使用分层架构来解决可伸缩性问题。在某些情况下，它们甚至可能会阻止或严格限制使用真实域模型，从而迫使所有域逻辑进入服务。虽然可以快速构建应用程序，但最终会导致复杂性增加和开发速度变慢。

命令查询任务分离（CQRS）模式解决了这些问题并极大地改变了应用程序的体系结构。 CQRS不将分离的逻辑划分为不同的层。分离的逻辑基于更改应用程序或查询的状态。这意味着执行命令（行为可能会改变应用程序的状态）和查询应用程序数据是由不同的组件执行的。这种分离的最重要原因是它们具有不同的技术和非技术要求。执行该命令时，查询组件按事件同步或异步更新。此更新机制是通过事件完成的，正是这种体系结构具有可扩展性，可扩展性，并且最终更易于维护。

><b>注意</b>
>一个完整的CQRS解释不在本文的范围之内。如果你想了解更多关于CQRS的信息, 请访问 Axon Framework的网站: www.axonframework.org。它包含了背景知识的链接。

因为CQRS与主导当今软件情况的层次结构根本不同，开发人员试图找到自己的方式来实现这种架构，但往往陷入各种陷阱。这就是Axon Framework诞生的原因：帮助开发人员实施CQRS并仅关注业务逻辑。

## Axon是什么?

Axon Framework通过支持开发人员应用CQRS架构模式，帮助构建可伸缩，可扩展和可维护的应用程序。它通过提供最重要的构建块的实现来实现，例如聚合，仓库和事件总线（事件调度机制）。此外，Axon还提供注释支持，允许您构建聚合和事件侦听器，而无需将代码绑定到特定于Axon的逻辑。这使您可以专注于业务逻辑而不是数据传输，并帮助您更轻松地隔离代码。

Axon不会尝试以任何方式隐藏CQRS架构或任何组件。因此，根据团队规模，每个团队中有一名或多名开发人员对CQRS有透彻的了解是明智的。无论如何，Axon有助于确保将事件传递给正确的事件侦听器，并以正确的顺序同时处理。这些多线程问题通常难以处理，导致难以跟踪Bug，并且应用程序完全没有响应。当你被迫按时，你甚至可能不想关心这些问题。 Axon的代码经过全面测试，可以防止出现这些类型的错误。

Axon Framework由多个模块（jar）组成，这些模块提供了构建可扩展基础架构的工具和组件。 Axon核心模块为不同组件提供基本API，并为单个JVM应用程序解决方案提供简单的实现。其他模块提供专业组件来解决可扩展性和高性能问题。

## 何时使用Axon?

并非每个应用程序都会受益于Axon。简单的CRUD（创建，读取，更新，删除）应用程序，不能水平扩展的应用程序可能无法从CQRS或Axon中受益。

具有以下一个或多个特点的应用程序可能会从CQRS和Axon中受益:

 * 新功能可以在很长一段时间内不断扩展。例如，在线商店最初可能只是订单跟踪系统。稍后，它可能会扩展以管理库存信息并确保库存及时更新。随后，财务人员可能需要出售财务统计数据等。虽然很难预测未来软件项目将如何发展，但大多数类型的应用程序都清楚地呈现出来。

 * 该应用程序具有高读写比率，这意味着数据只写了几次，但读了很多次。由于查询的数据源与用于命令验证的数据源不同，因此可以优化数据源的快速查询。重复数据不再是问题，因为数据更改时将释放事件。

 * 应用程序需要以不同的格式显示数据，许多应用程序不仅仅停止在当前向网页显示数据。搜索引擎也是某些应用程序的示例，例如用户相关更改的月度电子邮件通知。他们使用相同的应用程序数据，但从某种意义上说，这是对优化的快速搜索。报告工具会随时间汇总信息，这也是同一数据的不同格式。使用Axon，每个数据源可以独立更新或实时独立更新。

 * 当应用程序面对不同的受众并明确分离组件时，它也可以从Axon中受益。例如，在线商店。员工可以在网站上更新产品信息和可用性，而客户可以下订单并查询订单状态。使用Axon，这些组件可以部署在不同的服务器上，并使用不同的策略进行扩展。通过事件机制，Axon将事件分发到部署在不同服务器上的订阅组件，以使其保持最新。

 * 与其他应用程序集成可能是一项繁琐的任务。严格使用命令和事件来定义应用程序的API，可以更轻松地与外部应用程序集成。任何应用程序都可以发送命令或监视应用程序生成的事件。

作者：勇赴
链接：https://www.jianshu.com/p/15484ed1fbde
來源：简书
简书著作权归作者所有，任何形式的转载都请联系作者获得授权并注明出处。