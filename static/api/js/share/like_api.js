window._bd_share_main.F.module("share/like_api",function(e,n,t){e("base/tangram").T;var i=e("base/class").Class,c=e("share/api_base");n.Api=i.create(function(e){var n=this,t={count:0,clicked:!1};n._init=function(){var e=n.getView();e.render(),e.init(),function(e){window._bd_share_main.F.use("trans/data",function(n){n.get({type:"like_count",url:document.location.href,callback:function(n){e&&e({count:n})}})})}(function(n){t.count=n.count,e.setNumber(n.count)})},n._processAction=function(e){"like"==e.cmd&&(t.clicked?n.getView().showDoneState(e.element):function(e){window._bd_share_main.F.use("trans/trans",function(n){n.run({type:"like",url:document.location.href,callback:function(n){e&&e({err:n})}})})}(function(i){t.clicked=!0,0==i.err?(t.count++,n.getView().addOne(e.element,t.count)):n.getView().showDoneState(e.element)}))}},c.ApiBase)});